{"version":3,"sources":["webpack:///static/js/19.629401a4798a1420ed59.js","webpack:///./src/img/heart.svg","webpack:///./src/view/splash/index.vue?6b89","webpack:///./src/view/splash/index.vue","webpack:///./src/view/splash/index.vue?4730","webpack:///./src/view/splash/index.vue?7519"],"names":["webpackJsonp","//0l","module","exports","a4m8","__webpack_exports__","__webpack_require__","Object","defineProperty","value","Component","i18n","JSON","parse","options","__i18n","beforeCreate","push","this","$event","emit","xFbz","regenerator","regenerator_default","n","promise","promise_default","slicedToArray","slicedToArray_default","asyncToGenerator","asyncToGenerator_default","package_0","package_default","heart","heart_default","_window","window","splash__window","_","a","version","splash__","splash_version","view_splash","mounted","_this","mark","_callee7","dpr","width","height","_window$util$canvas","canvas","context","svg","base64","img","white","pink","deadline","progressPeak","progressPercentage","text","ellipsis","fadeoutPercentage","range","clear","drawBackground","createHeart","createBorder","createProgress","createShape","drawHeart","drawText","drawHollow","drawVersion","wrap","_context7","prev","next","devicePixelRatio","innerWidth","innerHeight","util","style","document","body","appendChild","html","xml","sent","font","getComputedStyle","documentElement","replace","match","parseFloat","toFixed","clearRect","beginPath","fillStyle","rect","fill","closePath","size","color","_window$util$canvas2","drawImage","globalCompositeOperation","shape","thickness","offset","top-left","top","top-right","left","right","bottom-left","bottom","bottom-right","_window$util$canvas3","save","translate","forEach","_ref","_ref2","x","y","restore","getContext","_window$util$canvas4","inner","middle","outer","final","textAlign","fillText","measureText","hollow","once","_callee3","_context3","loop","_ref4","_callee","resolve","_context","sleep","abrupt","stop","_x","apply","arguments","_ref5","_callee2","length","_context2","repeat","_x2","$t","$storage","config","$forage","type","key","_callee6","_context6","_ref7","_callee4","_context4","globalAlpha","_x3","_ref8","_callee5","_context5","_x4","remove","$replace","render","_vm","_h","$createElement","_self","_c","attrs","id","staticRenderFns","esExports","selectortype_template_index_0_src_view_splash","normalizeComponent","customBlock","__esModule","default"],"mappings":"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","file":"static/js/19.629401a4798a1420ed59.js","sourcesContent":["webpackJsonp([19],{\n\n/***/ \"//0l\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg t=\\\"1541398918575\\\" class=\\\"icon\\\" style viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"867\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"><defs><style type=\\\"text/css\\\"></style></defs><path d=\\\"M794.88 254.933333C716.117333 185.728 576 197.888 512 329.045333c-64-131.157333-204.16-143.317333-282.88-74.112-73.216 64.256-73.258667 193.578667-24.533333 280.32 64.981333 115.797333 141.866667 177.92 240.213333 252.586667A111.36 111.36 0 0 0 512 810.666667a111.36 111.36 0 0 0 67.2-22.784c98.346667-74.154667 174.890667-136.832 240.213333-252.586667 48.725333-86.784 48.64-216.106667-24.576-280.362667z\\\" p-id=\\\"868\\\"></path></svg>\"\n\n/***/ }),\n\n/***/ \"a4m8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony default export */ __webpack_exports__[\"default\"] = (function (Component) {\n      const i18n = JSON.parse('{\"splash@checking\":{\"en\":\"Checking for Updates\",\"zh-CN\":\"正在检查更新\"},\"splash@updating\":{\"en\":\"Updating\",\"zh-CN\":\"正在更新\"},\"splash@loading\":{\"en\":\"Loading\",\"zh-CN\":\"加载中\"},\"home@coming-soon\":null}')\n      // console.log(i18n)\n      Component.options.__i18n = i18n\n      Component.options.beforeCreate = Component.options.beforeCreate || []\n      Component.options.beforeCreate.push(function () {\n        this.$event.emit('i18n:add', i18n)\n      })\n    });\n\n/***/ }),\n\n/***/ \"xFbz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"Xxa5\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/promise.js\nvar promise = __webpack_require__(\"//Fk\");\nvar promise_default = /*#__PURE__*/__webpack_require__.n(promise);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/slicedToArray.js\nvar slicedToArray = __webpack_require__(\"d7EF\");\nvar slicedToArray_default = /*#__PURE__*/__webpack_require__.n(slicedToArray);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"exGp\");\nvar asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator);\n\n// EXTERNAL MODULE: ./package.json\nvar package_0 = __webpack_require__(\"7YgM\");\nvar package_default = /*#__PURE__*/__webpack_require__.n(package_0);\n\n// EXTERNAL MODULE: ./src/img/heart.svg\nvar heart = __webpack_require__(\"//0l\");\nvar heart_default = /*#__PURE__*/__webpack_require__.n(heart);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vux-loader/src/script-loader.js!./node_modules/vux-loader/src/script-loader.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/view/splash/index.vue\n\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\nvar _window = window,\n    _ = _window._;\nvar version = package_default.a.version;\n\n\n/* harmony default export */ var splash = ({\n  mounted: function mounted() {\n    var _this = this;\n\n    return asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee7() {\n      var dpr, width, height, _window$util$canvas, canvas, context, svg, base64, img, white, pink, deadline, progressPeak, progressPercentage, text, ellipsis, fadeoutPercentage, range, clear, drawBackground, createHeart, createBorder, createProgress, createShape, drawHeart, drawText, drawHollow, drawVersion;\n\n      return regenerator_default.a.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              // 创建画布\n              dpr = window.devicePixelRatio;\n              width = window.innerWidth * dpr;\n              height = window.innerHeight * dpr;\n              _window$util$canvas = window.util.canvas(width, height), canvas = _window$util$canvas.canvas, context = _window$util$canvas.context;\n\n              _this.canvas = canvas;\n              _this.context = context;\n              canvas.style['top'] = 0;\n              canvas.style['left'] = 0;\n              canvas.style['width'] = window.innerWidth + 'px';\n              canvas.style['height'] = window.innerHeight + 'px';\n              canvas.style['z-index'] = 99999;\n              canvas.style['opacity'] = 1;\n              canvas.style['position'] = 'absolute';\n              document.body.appendChild(canvas);\n\n              // 图形常量\n              svg = util.html(heart_default.a);\n              base64 = util.xml(svg);\n              _context7.next = 18;\n              return window.util.img(base64);\n\n            case 18:\n              img = _context7.sent;\n\n\n              // 字体\n              context.font = window.getComputedStyle(document.documentElement).font.replace(/\\b[0-9\\.]+px/g, function (match) {\n                return +(parseFloat(match) * dpr).toFixed(2) + 'px';\n              });\n\n              // 颜色常量\n              white = '#ffffff';\n              pink = '#fb7299';\n\n              // 动画终结点\n\n              deadline = 100;\n              // 动画进度条阶段 进度临时峰值\n\n              progressPeak = 0;\n              // 动画进度条阶段 进度变量\n\n              progressPercentage = 0;\n              // 动画进度条阶段 文案变量\n\n              text = '';\n              // 动画进度条阶段 省略号变量\n\n              ellipsis = '...';\n              // 动画淡出阶段 进度变量\n\n              fadeoutPercentage = 0;\n              range = util.range(0, 100);\n\n              // 清除画布\n\n              clear = function clear() {\n                return context.clearRect(0, 0, width, height);\n              };\n              // 背景层\n\n\n              drawBackground = function drawBackground() {\n                context.beginPath();\n                context.fillStyle = white;\n                context.rect(0, 0, width, height);\n                context.fill();\n                context.closePath();\n              };\n              // 创建心形\n\n\n              createHeart = function createHeart(size, color) {\n                var _window$util$canvas2 = window.util.canvas(size),\n                    canvas = _window$util$canvas2.canvas,\n                    context = _window$util$canvas2.context;\n\n                context.drawImage(img, 0, 0, size, size);\n                context.globalCompositeOperation = 'source-in';\n                context.beginPath();\n                context.fillStyle = color;\n                context.rect(0, 0, size, size);\n                context.fill();\n                context.closePath();\n                context.globalCompositeOperation = 'source-over';\n                return canvas;\n              };\n              // 创建描边\n\n\n              createBorder = function createBorder(shape, thickness, color) {\n                var offset = {\n                  'top-left': [-1, -1],\n                  'top': [0, -1],\n                  'top-right': [1, -1],\n                  'left': [-1, 0],\n                  'right': [1, 0],\n                  'bottom-left': [-1, 1],\n                  'bottom': [0, 1],\n                  'bottom-right': [1, 1]\n                };\n                var width = shape.width + thickness * 2;\n                var height = shape.height + thickness * 2;\n\n                var _window$util$canvas3 = window.util.canvas(width, height),\n                    canvas = _window$util$canvas3.canvas,\n                    context = _window$util$canvas3.context;\n\n                context.save();\n                context.translate(thickness, thickness);\n                _.forEach(offset, function (_ref) {\n                  var _ref2 = slicedToArray_default()(_ref, 2),\n                      x = _ref2[0],\n                      y = _ref2[1];\n\n                  context.drawImage(shape, x * thickness, y * thickness, shape.width, shape.height);\n                });\n                context.restore();\n                context.globalCompositeOperation = 'source-in';\n                context.beginPath();\n                context.fillStyle = color;\n                context.rect(0, 0, width, height);\n                context.fill();\n                context.closePath();\n                context.globalCompositeOperation = 'source-over';\n                return canvas;\n              };\n              // 创建进度区域 progressPercentage\n\n\n              createProgress = function createProgress(shape) {\n                // progressPercentage 0 -> 100\n                var context = shape.getContext('2d');\n                // value 越大 切割后剩余区域越小\n                var min = .20;\n                var max = .90;\n                var value = min + (max - min) * range(progressPercentage) / 100;\n                // console.log(value)\n                // value 是擦除区域 需要取反\n                context.clearRect(0, 0, shape.width, shape.height * (1 - value));\n                return shape;\n              };\n              // 创建描边心形\n\n\n              createShape = function createShape() {\n                var size = 75 * dpr;\n                var thickness = 1 * dpr;\n\n                var _window$util$canvas4 = window.util.canvas(size + thickness * 2 * 3),\n                    canvas = _window$util$canvas4.canvas,\n                    context = _window$util$canvas4.context;\n\n                var inner = createHeart(size, pink);\n                var middle = createBorder(inner, thickness, white);\n                var outer = createBorder(middle, thickness, pink);\n                var final = createProgress(inner);\n                context.drawImage(outer, thickness * 0, thickness * 0, outer.width, outer.height);\n                context.drawImage(middle, thickness * 1, thickness * 1, middle.width, middle.height);\n                context.drawImage(final, thickness * 2, thickness * 2, inner.width, inner.height);\n                return canvas;\n              };\n              // 心形层\n\n\n              drawHeart = function drawHeart() {\n                var shape = createShape();\n                context.drawImage(shape, (width - shape.width) / 2, (height - shape.height) / 2, shape.width, shape.height);\n              };\n              // 文字层\n\n\n              drawText = function drawText() {\n                if (!text) {\n                  return;\n                }\n                var top = 60 * dpr;\n                context.fillStyle = pink;\n                context.textAlign = 'center';\n                context.fillText(text + ellipsis, (width + context.measureText(ellipsis).width) / 2, height / 2 + top);\n              };\n              // 镂空层\n\n\n              drawHollow = function drawHollow() {\n                var size = 75 * dpr;\n                var hollow = createHeart(size, '#000000');\n                context.globalCompositeOperation = 'destination-out';\n                context.drawImage(hollow, (width - hollow.width) / 2, (height - hollow.height) / 2, hollow.width, hollow.height);\n                context.globalCompositeOperation = 'source-over';\n              };\n              // 版本号\n\n\n              drawVersion = function drawVersion() {\n                var right = 20 * dpr;\n                var bottom = 24 * dpr;\n                context.fillStyle = pink;\n                context.textAlign = 'right';\n                context.fillText('v' + version, width - right, height - bottom);\n              };\n\n              // 动画初始化\n\n\n              window.$event.once('splash:init', function () {\n                canvas.style['pointer-events'] = 'auto';\n                clear();\n                drawBackground();\n              });\n              // 动画进度条阶段\n              window.$event.once('splash:progress', asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee3() {\n                return regenerator_default.a.wrap(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        // 动画线程\n                        window.util.loop(function () {\n                          return new promise_default.a(function () {\n                            var _ref4 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee(resolve) {\n                              return regenerator_default.a.wrap(function _callee$(_context) {\n                                while (1) {\n                                  switch (_context.prev = _context.next) {\n                                    case 0:\n                                      if (!(progressPercentage > deadline)) {\n                                        _context.next = 5;\n                                        break;\n                                      }\n\n                                      _context.next = 3;\n                                      return window.util.sleep(100);\n\n                                    case 3:\n                                      window.$event.emit('splash:fadeout');\n                                      return _context.abrupt('return');\n\n                                    case 5:\n                                      clear();\n                                      drawBackground();\n                                      drawHeart();\n                                      drawText();\n                                      drawVersion();\n                                      _context.next = 12;\n                                      return window.util.sleep(20);\n\n                                    case 12:\n                                      if (progressPercentage > progressPeak) {\n                                        // 进度变量 达到 进度临时峰值\n                                        // 动画缓停\n                                      } else {\n                                        progressPercentage++;\n                                        // 进度变量 未达到 进度临时峰值\n                                        // 动画继续\n                                      }\n                                      resolve();\n\n                                    case 14:\n                                    case 'end':\n                                      return _context.stop();\n                                  }\n                                }\n                              }, _callee, _this);\n                            }));\n\n                            return function (_x) {\n                              return _ref4.apply(this, arguments);\n                            };\n                          }());\n                        });\n                        // 省略号线程\n                        window.util.loop(function () {\n                          return new promise_default.a(function () {\n                            var _ref5 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee2(resolve) {\n                              var length;\n                              return regenerator_default.a.wrap(function _callee2$(_context2) {\n                                while (1) {\n                                  switch (_context2.prev = _context2.next) {\n                                    case 0:\n                                      if (!(progressPercentage > deadline)) {\n                                        _context2.next = 2;\n                                        break;\n                                      }\n\n                                      return _context2.abrupt('return');\n\n                                    case 2:\n                                      length = ellipsis.length % 3;\n\n                                      ellipsis = _.repeat('.', length + 1);\n                                      _context2.next = 6;\n                                      return window.util.sleep(200);\n\n                                    case 6:\n                                      resolve();\n\n                                    case 7:\n                                    case 'end':\n                                      return _context2.stop();\n                                  }\n                                }\n                              }, _callee2, _this);\n                            }));\n\n                            return function (_x2) {\n                              return _ref5.apply(this, arguments);\n                            };\n                          }());\n                        });\n                        // 动画逻辑\n                        progressPeak = 30;\n                        text = _this.$t('splash@checking');\n                        _context3.next = 6;\n                        return window.util.sleep(800);\n\n                      case 6:\n                        if (!(_this.$storage.config['splash:display-updating'] === version)) {\n                          _context3.next = 9;\n                          break;\n                        }\n\n                        _context3.next = 15;\n                        break;\n\n                      case 9:\n                        progressPeak = 60;\n                        text = _this.$t('splash@updating');\n                        _context3.next = 13;\n                        return _this.$forage({ type: 'set', key: 'config@splash:display-updating', value: version });\n\n                      case 13:\n                        _context3.next = 15;\n                        return window.util.sleep(1400);\n\n                      case 15:\n                        progressPeak = 100;\n                        text = _this.$t('splash@loading');\n\n                      case 17:\n                      case 'end':\n                        return _context3.stop();\n                    }\n                  }\n                }, _callee3, _this);\n              })));\n              // 动画淡出阶段\n              window.$event.once('splash:fadeout', asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee6() {\n                return regenerator_default.a.wrap(function _callee6$(_context6) {\n                  while (1) {\n                    switch (_context6.prev = _context6.next) {\n                      case 0:\n                        // 动画线程\n                        window.util.loop(function () {\n                          return new promise_default.a(function () {\n                            var _ref7 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee4(resolve) {\n                              return regenerator_default.a.wrap(function _callee4$(_context4) {\n                                while (1) {\n                                  switch (_context4.prev = _context4.next) {\n                                    case 0:\n                                      if (!(fadeoutPercentage > deadline)) {\n                                        _context4.next = 2;\n                                        break;\n                                      }\n\n                                      return _context4.abrupt('return');\n\n                                    case 2:\n                                      clear();\n                                      drawBackground();\n                                      context.globalAlpha = 1 - range(fadeoutPercentage) / 100;\n                                      drawHeart();\n                                      drawText();\n                                      context.globalAlpha = 1 - context.globalAlpha;\n                                      drawHollow();\n                                      context.globalAlpha = 1;\n                                      resolve();\n\n                                    case 11:\n                                    case 'end':\n                                      return _context4.stop();\n                                  }\n                                }\n                              }, _callee4, _this);\n                            }));\n\n                            return function (_x3) {\n                              return _ref7.apply(this, arguments);\n                            };\n                          }());\n                        });\n                        // 参数递增线程\n                        window.util.loop(function () {\n                          return new promise_default.a(function () {\n                            var _ref8 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee5(resolve) {\n                              return regenerator_default.a.wrap(function _callee5$(_context5) {\n                                while (1) {\n                                  switch (_context5.prev = _context5.next) {\n                                    case 0:\n                                      if (!(fadeoutPercentage > deadline)) {\n                                        _context5.next = 2;\n                                        break;\n                                      }\n\n                                      return _context5.abrupt('return');\n\n                                    case 2:\n                                      _context5.next = 4;\n                                      return window.util.sleep(10);\n\n                                    case 4:\n                                      fadeoutPercentage += 7;\n                                      resolve();\n\n                                    case 6:\n                                    case 'end':\n                                      return _context5.stop();\n                                  }\n                                }\n                              }, _callee5, _this);\n                            }));\n\n                            return function (_x4) {\n                              return _ref8.apply(this, arguments);\n                            };\n                          }());\n                        });\n                        // 放大\n                        _context6.next = 4;\n                        return window.util.sleep(200);\n\n                      case 4:\n                        canvas.style['transition'] = 'transform .3s cubic-bezier(0, 0, 1, 0)';\n                        canvas.style['transform'] = 'scale(20)';\n                        _context6.next = 8;\n                        return window.util.sleep(400);\n\n                      case 8:\n                        window.$event.emit('splash:destroy');\n\n                      case 9:\n                      case 'end':\n                        return _context6.stop();\n                    }\n                  }\n                }, _callee6, _this);\n              })));\n              // 动画销毁\n              window.$event.once('splash:destroy', function () {\n                canvas.remove();\n              });\n\n              // test\n              // window.$event.emit('splash:init')\n              // window.$event.emit('splash:progress')\n              // progressPeak = 100\n              // return\n\n              window.$event.emit('splash:init');\n              window.$event.emit('splash:progress');\n\n              _context7.next = 47;\n              return window.util.sleep(100);\n\n            case 47:\n              _this.$replace('home');\n\n            case 48:\n            case 'end':\n              return _context7.stop();\n          }\n        }\n      }, _callee7, _this);\n    }))();\n  }\n});\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vux-loader/src/script-loader.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/view/splash/index.vue\n\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\nvar splash__window = window,\n    splash__ = splash__window._;\nvar splash_version = package_default.a.version;\n\n\n/* harmony default export */ var view_splash = ({\n  mounted: function mounted() {\n    var _this = this;\n\n    return asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee7() {\n      var dpr, width, height, _window$util$canvas, canvas, context, svg, base64, img, white, pink, deadline, progressPeak, progressPercentage, text, ellipsis, fadeoutPercentage, range, clear, drawBackground, createHeart, createBorder, createProgress, createShape, drawHeart, drawText, drawHollow, drawVersion;\n\n      return regenerator_default.a.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              // 创建画布\n              dpr = window.devicePixelRatio;\n              width = window.innerWidth * dpr;\n              height = window.innerHeight * dpr;\n              _window$util$canvas = window.util.canvas(width, height), canvas = _window$util$canvas.canvas, context = _window$util$canvas.context;\n\n              _this.canvas = canvas;\n              _this.context = context;\n              canvas.style['top'] = 0;\n              canvas.style['left'] = 0;\n              canvas.style['width'] = window.innerWidth + 'px';\n              canvas.style['height'] = window.innerHeight + 'px';\n              canvas.style['z-index'] = 99999;\n              canvas.style['opacity'] = 1;\n              canvas.style['position'] = 'absolute';\n              document.body.appendChild(canvas);\n\n              // 图形常量\n              svg = util.html(heart_default.a);\n              base64 = util.xml(svg);\n              _context7.next = 18;\n              return window.util.img(base64);\n\n            case 18:\n              img = _context7.sent;\n\n\n              // 字体\n              context.font = window.getComputedStyle(document.documentElement).font.replace(/\\b[0-9\\.]+px/g, function (match) {\n                return +(parseFloat(match) * dpr).toFixed(2) + 'px';\n              });\n\n              // 颜色常量\n              white = '#ffffff';\n              pink = '#fb7299';\n\n              // 动画终结点\n\n              deadline = 100;\n              // 动画进度条阶段 进度临时峰值\n\n              progressPeak = 0;\n              // 动画进度条阶段 进度变量\n\n              progressPercentage = 0;\n              // 动画进度条阶段 文案变量\n\n              text = '';\n              // 动画进度条阶段 省略号变量\n\n              ellipsis = '...';\n              // 动画淡出阶段 进度变量\n\n              fadeoutPercentage = 0;\n              range = util.range(0, 100);\n\n              // 清除画布\n\n              clear = function clear() {\n                return context.clearRect(0, 0, width, height);\n              };\n              // 背景层\n\n\n              drawBackground = function drawBackground() {\n                context.beginPath();\n                context.fillStyle = white;\n                context.rect(0, 0, width, height);\n                context.fill();\n                context.closePath();\n              };\n              // 创建心形\n\n\n              createHeart = function createHeart(size, color) {\n                var _window$util$canvas2 = window.util.canvas(size),\n                    canvas = _window$util$canvas2.canvas,\n                    context = _window$util$canvas2.context;\n\n                context.drawImage(img, 0, 0, size, size);\n                context.globalCompositeOperation = 'source-in';\n                context.beginPath();\n                context.fillStyle = color;\n                context.rect(0, 0, size, size);\n                context.fill();\n                context.closePath();\n                context.globalCompositeOperation = 'source-over';\n                return canvas;\n              };\n              // 创建描边\n\n\n              createBorder = function createBorder(shape, thickness, color) {\n                var offset = {\n                  'top-left': [-1, -1],\n                  'top': [0, -1],\n                  'top-right': [1, -1],\n                  'left': [-1, 0],\n                  'right': [1, 0],\n                  'bottom-left': [-1, 1],\n                  'bottom': [0, 1],\n                  'bottom-right': [1, 1]\n                };\n                var width = shape.width + thickness * 2;\n                var height = shape.height + thickness * 2;\n\n                var _window$util$canvas3 = window.util.canvas(width, height),\n                    canvas = _window$util$canvas3.canvas,\n                    context = _window$util$canvas3.context;\n\n                context.save();\n                context.translate(thickness, thickness);\n                splash__.forEach(offset, function (_ref) {\n                  var _ref2 = slicedToArray_default()(_ref, 2),\n                      x = _ref2[0],\n                      y = _ref2[1];\n\n                  context.drawImage(shape, x * thickness, y * thickness, shape.width, shape.height);\n                });\n                context.restore();\n                context.globalCompositeOperation = 'source-in';\n                context.beginPath();\n                context.fillStyle = color;\n                context.rect(0, 0, width, height);\n                context.fill();\n                context.closePath();\n                context.globalCompositeOperation = 'source-over';\n                return canvas;\n              };\n              // 创建进度区域 progressPercentage\n\n\n              createProgress = function createProgress(shape) {\n                // progressPercentage 0 -> 100\n                var context = shape.getContext('2d');\n                // value 越大 切割后剩余区域越小\n                var min = .20;\n                var max = .90;\n                var value = min + (max - min) * range(progressPercentage) / 100;\n                // console.log(value)\n                // value 是擦除区域 需要取反\n                context.clearRect(0, 0, shape.width, shape.height * (1 - value));\n                return shape;\n              };\n              // 创建描边心形\n\n\n              createShape = function createShape() {\n                var size = 75 * dpr;\n                var thickness = 1 * dpr;\n\n                var _window$util$canvas4 = window.util.canvas(size + thickness * 2 * 3),\n                    canvas = _window$util$canvas4.canvas,\n                    context = _window$util$canvas4.context;\n\n                var inner = createHeart(size, pink);\n                var middle = createBorder(inner, thickness, white);\n                var outer = createBorder(middle, thickness, pink);\n                var final = createProgress(inner);\n                context.drawImage(outer, thickness * 0, thickness * 0, outer.width, outer.height);\n                context.drawImage(middle, thickness * 1, thickness * 1, middle.width, middle.height);\n                context.drawImage(final, thickness * 2, thickness * 2, inner.width, inner.height);\n                return canvas;\n              };\n              // 心形层\n\n\n              drawHeart = function drawHeart() {\n                var shape = createShape();\n                context.drawImage(shape, (width - shape.width) / 2, (height - shape.height) / 2, shape.width, shape.height);\n              };\n              // 文字层\n\n\n              drawText = function drawText() {\n                if (!text) {\n                  return;\n                }\n                var top = 60 * dpr;\n                context.fillStyle = pink;\n                context.textAlign = 'center';\n                context.fillText(text + ellipsis, (width + context.measureText(ellipsis).width) / 2, height / 2 + top);\n              };\n              // 镂空层\n\n\n              drawHollow = function drawHollow() {\n                var size = 75 * dpr;\n                var hollow = createHeart(size, '#000000');\n                context.globalCompositeOperation = 'destination-out';\n                context.drawImage(hollow, (width - hollow.width) / 2, (height - hollow.height) / 2, hollow.width, hollow.height);\n                context.globalCompositeOperation = 'source-over';\n              };\n              // 版本号\n\n\n              drawVersion = function drawVersion() {\n                var right = 20 * dpr;\n                var bottom = 24 * dpr;\n                context.fillStyle = pink;\n                context.textAlign = 'right';\n                context.fillText('v' + splash_version, width - right, height - bottom);\n              };\n\n              // 动画初始化\n\n\n              window.$event.once('splash:init', function () {\n                canvas.style['pointer-events'] = 'auto';\n                clear();\n                drawBackground();\n              });\n              // 动画进度条阶段\n              window.$event.once('splash:progress', asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee3() {\n                return regenerator_default.a.wrap(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        // 动画线程\n                        window.util.loop(function () {\n                          return new promise_default.a(function () {\n                            var _ref4 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee(resolve) {\n                              return regenerator_default.a.wrap(function _callee$(_context) {\n                                while (1) {\n                                  switch (_context.prev = _context.next) {\n                                    case 0:\n                                      if (!(progressPercentage > deadline)) {\n                                        _context.next = 5;\n                                        break;\n                                      }\n\n                                      _context.next = 3;\n                                      return window.util.sleep(100);\n\n                                    case 3:\n                                      window.$event.emit('splash:fadeout');\n                                      return _context.abrupt('return');\n\n                                    case 5:\n                                      clear();\n                                      drawBackground();\n                                      drawHeart();\n                                      drawText();\n                                      drawVersion();\n                                      _context.next = 12;\n                                      return window.util.sleep(20);\n\n                                    case 12:\n                                      if (progressPercentage > progressPeak) {\n                                        // 进度变量 达到 进度临时峰值\n                                        // 动画缓停\n                                      } else {\n                                        progressPercentage++;\n                                        // 进度变量 未达到 进度临时峰值\n                                        // 动画继续\n                                      }\n                                      resolve();\n\n                                    case 14:\n                                    case 'end':\n                                      return _context.stop();\n                                  }\n                                }\n                              }, _callee, _this);\n                            }));\n\n                            return function (_x) {\n                              return _ref4.apply(this, arguments);\n                            };\n                          }());\n                        });\n                        // 省略号线程\n                        window.util.loop(function () {\n                          return new promise_default.a(function () {\n                            var _ref5 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee2(resolve) {\n                              var length;\n                              return regenerator_default.a.wrap(function _callee2$(_context2) {\n                                while (1) {\n                                  switch (_context2.prev = _context2.next) {\n                                    case 0:\n                                      if (!(progressPercentage > deadline)) {\n                                        _context2.next = 2;\n                                        break;\n                                      }\n\n                                      return _context2.abrupt('return');\n\n                                    case 2:\n                                      length = ellipsis.length % 3;\n\n                                      ellipsis = splash__.repeat('.', length + 1);\n                                      _context2.next = 6;\n                                      return window.util.sleep(200);\n\n                                    case 6:\n                                      resolve();\n\n                                    case 7:\n                                    case 'end':\n                                      return _context2.stop();\n                                  }\n                                }\n                              }, _callee2, _this);\n                            }));\n\n                            return function (_x2) {\n                              return _ref5.apply(this, arguments);\n                            };\n                          }());\n                        });\n                        // 动画逻辑\n                        progressPeak = 30;\n                        text = _this.$t('splash@checking');\n                        _context3.next = 6;\n                        return window.util.sleep(800);\n\n                      case 6:\n                        if (!(_this.$storage.config['splash:display-updating'] === splash_version)) {\n                          _context3.next = 9;\n                          break;\n                        }\n\n                        _context3.next = 15;\n                        break;\n\n                      case 9:\n                        progressPeak = 60;\n                        text = _this.$t('splash@updating');\n                        _context3.next = 13;\n                        return _this.$forage({ type: 'set', key: 'config@splash:display-updating', value: splash_version });\n\n                      case 13:\n                        _context3.next = 15;\n                        return window.util.sleep(1400);\n\n                      case 15:\n                        progressPeak = 100;\n                        text = _this.$t('splash@loading');\n\n                      case 17:\n                      case 'end':\n                        return _context3.stop();\n                    }\n                  }\n                }, _callee3, _this);\n              })));\n              // 动画淡出阶段\n              window.$event.once('splash:fadeout', asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee6() {\n                return regenerator_default.a.wrap(function _callee6$(_context6) {\n                  while (1) {\n                    switch (_context6.prev = _context6.next) {\n                      case 0:\n                        // 动画线程\n                        window.util.loop(function () {\n                          return new promise_default.a(function () {\n                            var _ref7 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee4(resolve) {\n                              return regenerator_default.a.wrap(function _callee4$(_context4) {\n                                while (1) {\n                                  switch (_context4.prev = _context4.next) {\n                                    case 0:\n                                      if (!(fadeoutPercentage > deadline)) {\n                                        _context4.next = 2;\n                                        break;\n                                      }\n\n                                      return _context4.abrupt('return');\n\n                                    case 2:\n                                      clear();\n                                      drawBackground();\n                                      context.globalAlpha = 1 - range(fadeoutPercentage) / 100;\n                                      drawHeart();\n                                      drawText();\n                                      context.globalAlpha = 1 - context.globalAlpha;\n                                      drawHollow();\n                                      context.globalAlpha = 1;\n                                      resolve();\n\n                                    case 11:\n                                    case 'end':\n                                      return _context4.stop();\n                                  }\n                                }\n                              }, _callee4, _this);\n                            }));\n\n                            return function (_x3) {\n                              return _ref7.apply(this, arguments);\n                            };\n                          }());\n                        });\n                        // 参数递增线程\n                        window.util.loop(function () {\n                          return new promise_default.a(function () {\n                            var _ref8 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee5(resolve) {\n                              return regenerator_default.a.wrap(function _callee5$(_context5) {\n                                while (1) {\n                                  switch (_context5.prev = _context5.next) {\n                                    case 0:\n                                      if (!(fadeoutPercentage > deadline)) {\n                                        _context5.next = 2;\n                                        break;\n                                      }\n\n                                      return _context5.abrupt('return');\n\n                                    case 2:\n                                      _context5.next = 4;\n                                      return window.util.sleep(10);\n\n                                    case 4:\n                                      fadeoutPercentage += 7;\n                                      resolve();\n\n                                    case 6:\n                                    case 'end':\n                                      return _context5.stop();\n                                  }\n                                }\n                              }, _callee5, _this);\n                            }));\n\n                            return function (_x4) {\n                              return _ref8.apply(this, arguments);\n                            };\n                          }());\n                        });\n                        // 放大\n                        _context6.next = 4;\n                        return window.util.sleep(200);\n\n                      case 4:\n                        canvas.style['transition'] = 'transform .3s cubic-bezier(0, 0, 1, 0)';\n                        canvas.style['transform'] = 'scale(20)';\n                        _context6.next = 8;\n                        return window.util.sleep(400);\n\n                      case 8:\n                        window.$event.emit('splash:destroy');\n\n                      case 9:\n                      case 'end':\n                        return _context6.stop();\n                    }\n                  }\n                }, _callee6, _this);\n              })));\n              // 动画销毁\n              window.$event.once('splash:destroy', function () {\n                canvas.remove();\n              });\n\n              // test\n              // window.$event.emit('splash:init')\n              // window.$event.emit('splash:progress')\n              // progressPeak = 100\n              // return\n\n              window.$event.emit('splash:init');\n              window.$event.emit('splash:progress');\n\n              _context7.next = 47;\n              return window.util.sleep(100);\n\n            case 47:\n              _this.$replace('home');\n\n            case 48:\n            case 'end':\n              return _context7.stop();\n          }\n        }\n      }, _callee7, _this);\n    }))();\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-164430f5\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/splash/index.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"splash\"}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_view_splash = (esExports);\n// CONCATENATED MODULE: ./src/view/splash/index.vue\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  view_splash,\n  selectortype_template_index_0_src_view_splash,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* customBlocks */\nvar customBlock = __webpack_require__(\"a4m8\")\nif (customBlock && customBlock.__esModule) {\n  customBlock = customBlock.default\n}\nif (typeof customBlock === \"function\") {\n  customBlock(Component)\n}\n\n\n/* harmony default export */ var src_view_splash = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/19.629401a4798a1420ed59.js","module.exports = \"<svg t=\\\"1541398918575\\\" class=\\\"icon\\\" style viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"867\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"><defs><style type=\\\"text/css\\\"></style></defs><path d=\\\"M794.88 254.933333C716.117333 185.728 576 197.888 512 329.045333c-64-131.157333-204.16-143.317333-282.88-74.112-73.216 64.256-73.258667 193.578667-24.533333 280.32 64.981333 115.797333 141.866667 177.92 240.213333 252.586667A111.36 111.36 0 0 0 512 810.666667a111.36 111.36 0 0 0 67.2-22.784c98.346667-74.154667 174.890667-136.832 240.213333-252.586667 48.725333-86.784 48.64-216.106667-24.576-280.362667z\\\" p-id=\\\"868\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/img/heart.svg\n// module id = //0l\n// module chunks = 19","export default function (Component) {\n      const i18n = JSON.parse('{\"splash@checking\":{\"en\":\"Checking for Updates\",\"zh-CN\":\"正在检查更新\"},\"splash@updating\":{\"en\":\"Updating\",\"zh-CN\":\"正在更新\"},\"splash@loading\":{\"en\":\"Loading\",\"zh-CN\":\"加载中\"},\"home@coming-soon\":null}')\n      // console.log(i18n)\n      Component.options.__i18n = i18n\n      Component.options.beforeCreate = Component.options.beforeCreate || []\n      Component.options.beforeCreate.push(function () {\n        this.$event.emit('i18n:add', i18n)\n      })\n    }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/i18n-loader.js!./node_modules/vue-loader/lib/selector.js?type=customBlocks&index=0!./src/view/splash/index.vue\n// module id = a4m8\n// module chunks = 19","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport pkg from 'package.json'\nimport heart from '@/img/heart.svg'\n\nconst { _ } = window\nconst { version } = pkg\n\nexport default {\n  async mounted () {\n    // 创建画布\n    const dpr = window.devicePixelRatio\n    const width = window.innerWidth * dpr\n    const height = window.innerHeight * dpr\n    const { canvas, context } = window.util.canvas(width, height)\n    this.canvas = canvas\n    this.context = context\n    canvas.style['top'] = 0\n    canvas.style['left'] = 0\n    canvas.style['width'] = `${window.innerWidth}px`\n    canvas.style['height'] = `${window.innerHeight}px`\n    canvas.style['z-index'] = 99999\n    canvas.style['opacity'] = 1\n    canvas.style['position'] = 'absolute'\n    document.body.appendChild(canvas)\n\n    // 图形常量\n    const svg = util.html(heart)\n    const base64 = util.xml(svg)\n    const img = await window.util.img(base64)\n\n    // 字体\n    context.font = window.getComputedStyle(document.documentElement).font.replace(/\\b[0-9\\.]+px/g, (match) => `${+((parseFloat(match) * dpr).toFixed(2))}px`)\n\n    // 颜色常量\n    const white = '#ffffff'\n    const pink = '#fb7299'\n\n    // 动画终结点\n    const deadline = 100\n    // 动画进度条阶段 进度临时峰值\n    let progressPeak = 0\n    // 动画进度条阶段 进度变量\n    let progressPercentage = 0\n    // 动画进度条阶段 文案变量\n    let text = ''\n    // 动画进度条阶段 省略号变量\n    let ellipsis = '...'\n    // 动画淡出阶段 进度变量\n    let fadeoutPercentage = 0\n\n    const range = util.range(0, 100)\n\n    // 清除画布\n    const clear = () => (context.clearRect(0, 0, width, height))\n    // 背景层\n    const drawBackground = () => {\n      context.beginPath()\n      context.fillStyle = white\n      context.rect(0, 0, width, height)\n      context.fill()\n      context.closePath()\n    }\n    // 创建心形\n    const createHeart = (size, color) => {\n      const { canvas, context } = window.util.canvas(size)\n      context.drawImage(img, 0, 0, size, size)\n      context.globalCompositeOperation = 'source-in'\n      context.beginPath()\n      context.fillStyle = color\n      context.rect(0, 0, size, size)\n      context.fill()\n      context.closePath()\n      context.globalCompositeOperation = 'source-over'\n      return canvas\n    }\n    // 创建描边\n    const createBorder = (shape, thickness, color) => {\n      const offset = {\n        'top-left': [-1, -1],\n        'top': [0, -1],\n        'top-right': [1, -1],\n        'left': [-1, 0],\n        'right': [1, 0],\n        'bottom-left': [-1, 1],\n        'bottom': [0, 1],\n        'bottom-right': [1, 1]\n      }\n      const width = shape.width + thickness * 2\n      const height = shape.height + thickness * 2\n      const { canvas, context } = window.util.canvas(width, height)\n      context.save()\n      context.translate(thickness, thickness)\n      _.forEach(offset, ([ x, y ]) => {\n        context.drawImage(shape, x * thickness, y * thickness, shape.width, shape.height)\n      })\n      context.restore()\n      context.globalCompositeOperation = 'source-in'\n      context.beginPath()\n      context.fillStyle = color\n      context.rect(0, 0, width, height)\n      context.fill()\n      context.closePath()\n      context.globalCompositeOperation = 'source-over'\n      return canvas\n    }\n    // 创建进度区域 progressPercentage\n    const createProgress = (shape) => {\n      // progressPercentage 0 -> 100\n      const context = shape.getContext('2d')\n      // value 越大 切割后剩余区域越小\n      const min = .20\n      const max = .90\n      const value = min + (max - min) * range(progressPercentage) / 100\n      // console.log(value)\n      // value 是擦除区域 需要取反\n      context.clearRect(0, 0, shape.width, shape.height * (1 - value))\n      return shape\n    }\n    // 创建描边心形\n    const createShape = () => {\n      const size = 75 * dpr\n      const thickness = 1 * dpr\n      const { canvas, context } = window.util.canvas(size + (thickness * 2) * 3)\n      const inner = createHeart(size, pink)\n      const middle = createBorder(inner, thickness, white)\n      const outer = createBorder(middle, thickness, pink)\n      const final = createProgress(inner)\n      context.drawImage(outer, thickness * 0, thickness * 0, outer.width, outer.height)\n      context.drawImage(middle, thickness * 1, thickness * 1, middle.width, middle.height)\n      context.drawImage(final, thickness * 2, thickness * 2, inner.width, inner.height)\n      return canvas\n    }\n    // 心形层\n    const drawHeart = () => {\n      const shape = createShape()\n      context.drawImage(shape, (width - shape.width) / 2, (height - shape.height) / 2, shape.width, shape.height)\n    }\n    // 文字层\n    const drawText = () => {\n      if (!text) {\n        return\n      }\n      const top = 60 * dpr\n      context.fillStyle = pink\n      context.textAlign = 'center'\n      context.fillText(text + ellipsis, (width + context.measureText(ellipsis).width) / 2, height / 2 + top)\n    }\n    // 镂空层\n    const drawHollow = () => {\n      const size = 75 * dpr\n      const hollow = createHeart(size, '#000000')\n      context.globalCompositeOperation = 'destination-out'\n      context.drawImage(hollow, (width - hollow.width) / 2, (height - hollow.height) / 2, hollow.width, hollow.height)\n      context.globalCompositeOperation = 'source-over'\n    }\n    // 版本号\n    const drawVersion = () => {\n      const right = 20 * dpr\n      const bottom = 24 * dpr\n      context.fillStyle = pink\n      context.textAlign = 'right'\n      context.fillText(`v${version}`, width - right, height - bottom)\n    }\n\n    // 动画初始化\n    window.$event.once('splash:init', () => {\n      canvas.style['pointer-events'] = 'auto'\n      clear()\n      drawBackground()\n    })\n    // 动画进度条阶段\n    window.$event.once('splash:progress', async () => {\n      // 动画线程\n      window.util.loop(() => (new Promise(async (resolve) => {\n        // 进度变量 达到 动画终结点\n        // 跳出 loop\n        if (progressPercentage > deadline) {\n          await window.util.sleep(100)\n          window.$event.emit('splash:fadeout')\n          return\n        }\n        clear()\n        drawBackground()\n        drawHeart()\n        drawText()\n        drawVersion()\n        await window.util.sleep(20)\n        if (progressPercentage > progressPeak) {\n          // 进度变量 达到 进度临时峰值\n          // 动画缓停\n        } else {\n          progressPercentage++\n          // 进度变量 未达到 进度临时峰值\n          // 动画继续\n        }\n        resolve()\n      })))\n      // 省略号线程\n      window.util.loop(() => (new Promise(async (resolve) => {\n        // 进度变量 达到 动画终结点\n        // 跳出 loop\n        if (progressPercentage > deadline) {\n          return\n        }\n        const length = ellipsis.length % 3\n        ellipsis = _.repeat('.', length + 1)\n        await window.util.sleep(200)\n        resolve()\n      })))\n      // 动画逻辑\n      progressPeak = 30\n      text = this.$t('splash@checking')\n      await window.util.sleep(800)\n      if (this.$storage.config['splash:display-updating'] === version) {\n        // noop\n      } else {\n        progressPeak = 60\n        text = this.$t('splash@updating')\n        await this.$forage({ type: 'set', key: 'config@splash:display-updating', value: version })\n        await window.util.sleep(1400)\n      }\n      progressPeak = 100\n      text = this.$t('splash@loading')\n    })\n    // 动画淡出阶段\n    window.$event.once('splash:fadeout', async () => {\n      // 动画线程\n      window.util.loop(() => (new Promise(async (resolve) => {\n        // 进度变量 达到 动画终结点\n        // 跳出 loop\n        if (fadeoutPercentage > deadline) {\n          return\n        }\n        clear()\n        drawBackground()\n        context.globalAlpha = 1 - range(fadeoutPercentage) / 100\n        drawHeart()\n        drawText()\n        context.globalAlpha = 1 - context.globalAlpha\n        drawHollow()\n        context.globalAlpha = 1\n        resolve()\n      })))\n      // 参数递增线程\n      window.util.loop(() => (new Promise(async (resolve) => {\n        // 进度变量 达到 动画终结点\n        // 跳出 loop\n        if (fadeoutPercentage > deadline) {\n          return\n        }\n        await window.util.sleep(10)\n        fadeoutPercentage += 7\n        resolve()\n      })))\n      // 放大\n      await window.util.sleep(200)\n      canvas.style['transition'] = 'transform .3s cubic-bezier(0, 0, 1, 0)'\n      canvas.style['transform'] = 'scale(20)'\n      await window.util.sleep(400)\n      window.$event.emit('splash:destroy')\n    })\n    // 动画销毁\n    window.$event.once('splash:destroy', () => {\n      canvas.remove()\n    })\n\n    // test\n    // window.$event.emit('splash:init')\n    // window.$event.emit('splash:progress')\n    // progressPeak = 100\n    // return\n\n    window.$event.emit('splash:init')\n    window.$event.emit('splash:progress')\n\n    await window.util.sleep(100)\n    this.$replace('home')\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/view/splash/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"splash\"}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-164430f5\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/splash/index.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-164430f5\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* customBlocks */\nvar customBlock = require(\"!!i18n-loader!../../../node_modules/vue-loader/lib/selector?type=customBlocks&index=0!./index.vue\")\nif (customBlock && customBlock.__esModule) {\n  customBlock = customBlock.default\n}\nif (typeof customBlock === \"function\") {\n  customBlock(Component)\n}\n\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/splash/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}